<!DOCTYPE html>
<html>
  <head>
    <script src="html5-chatclient/scripts/jquery-1.4.4.min.js"></script>
    <script src="html5-chatclient/scripts/jquery-ui.min.js"></script>
    <script src="script/dragdrop.js"></script>
    <script src="script/slide.js" type="text/javascript"></script>
    <meta charset="utf-8">

    <title>HTML5 - The good parts!</title>
      <link href="style/slide.css" rel="stylesheet" type="text/css">
      <link href="style/custom.css" rel="stylesheet" type="text/css">
    </head>

      <section>
        <h1>HTML5 - The good parts!</h1>
        <p>Kristoffer, Kris-Mikael og Ivar</p>
      </section>

<!--

Kristoffer-slides 

-->
      <section>
        <h1>HTML5</h1>
	<pre>
&#8249;!DOCTYPE html&#8250;
&#8249;html&#8250;
  &#8249;head&#8250;
    &#8249;meta charset="utf-8"&#8250;
  &#8249;/head&#8250;
  &#8249;p&#8250;Inhhold her&#8249;/p&#8250;
&#8249;/html&#8250;
</pre>
      </section>

      <section>
        <h1>HTML4</h1>
        <img src="images/semantic_html4.jpg" width="500px" />
      </section>

      <section>
        <h1>HTML5</h1>
        <img src="images/html-semantics-2.png" width="500px" />
      </section>

      <section data-onload="playVideo"
               data-onunload="stopVideo">
        <script>
          // |section| referes to this section element
          function playVideo(section) {
            section.querySelector("video").play();
          }
          function stopVideo(section) {
            section.querySelector("video").pause();
          }
        </script>
        <h1>A video</h1>
        <video controls autobuffer preload src="http://demos.hacks.mozilla.org/openweb/LONDONPROJECT/fight.ogv"></video>
      </section>

<!--

KM-slide

-->

   <section>
      <h1 id="lala">Multifile og Drag &amp; drop</h1>
		<ul>
			<li>Erstatter multipart-forms med X-antall singlefiler</li>
			<li>Ikke nødvendig med plugins. Bye bye flash+silverlight :D</li>
			<li>Benytter eventlisteners man kan utnytte gjennom javascript</li>
		</ul>
      <form method="POST">
                    <p class="small">Fler om gangen! &raquo;<input id="files-upload" name="file-upload" type="file" multiple></p>
         <p id="drop-area">
            dra filer hit!
         </p>
         <ul id="file-list">
            <li class="no-items">(no filez, please upload)</li>
         </ul>
      </form>

   </section>

<!--

Ivar-slide

-->

       <section>
        <h1>Web Workers (1/2)</h1>
        <ul>
	  <li>"Tråder" i JavaScript</li>
	  <li>Begrenset hva en worker kan gjøre</li>
	</ul>
      </section>
      <section>
        <h1>Web Workers (1/2)</h1>	
<pre>
var worker = new Worker('task.js');
worker.onmessage = function(event) { alert(event.data); };
worker.postMessage('data');
</pre>
task.js:
<pre>
self.onmessage = function(event) {
  // Do some work.
  self.postMessage("recv'd: " + event.data);
};
</pre>
      </section>

<!--

KM-slide

-->

      <section>
        <h1>Websockets (1/2)</h1>
			<ul>
				<li>comet, men ...</li>
				<li>!(forever frame, long polling)
				<li>ws: (og wss:) woho!</li>
			</ul>
      </section>

      <section>
        <h1>Websockets (2/2) - Hookbox</h1>
			<ul>
				<li>channels, history, presence</li>
				<li>web sockets, med fallback</li>
			</ul>
      </section>

<!--

Ivar-slides

-->
      <section>
        <h1>Web Storage (1/4)</h1>
	<ul>
		<li>localStorage</li>
		<li>sessionStorage</li>
	</ul>
      </section>

      <section>
        <h1>Web Storage (2/4)</h1>
        <pre>
localStorage.setItem('value', area.value);
localStorage.getItem('value');
localStorage.removeItem('value');
localStorage.clear();</pre>
      </section>
      <section>
        <h1>Web Storage (3/4)</h1>
        <pre>
for (var i=0, il=localStorage.length; i&#8249;il; i++) {
  console.log("%s = %s", 
    localStorage.key(i),  
    localStorage.getItem(localStorage.key(i)));
}
</pre>
      </section>

      <section>
        <h1>Web Storage (4/4)</h1>
	<br />
	<textarea id="text-area" placeholder="Type your text here..." style="width: 305px;font-size: 26px;"></textarea> <br />
	<button onclick="clear_click();" style="width: 152px;font-size: 20px;">Clear</button>  		
	<button id="save-ta" onclick="save_click();" style="width: 152px;font-size: 20px;">Save</button>	
	<script> 
	  
	  // place content from previous edit
	  var area = document.querySelector('#text-area');
	  if (!area.value) {
	    area.innerHTML = window.localStorage.getItem('value');
	  }	  	  
	  // your content will be saved locally
	  function save_click() {
	    var area = document.querySelector('#text-area');
	    window.localStorage.setItem('value', area.value);
  	    for (var i=0, il=localStorage.length; i<il; i++) {
	      console.log("%s = %s", localStorage.key(i), localStorage.getItem(localStorage.key(i)));
	    }
	  }	  
	  function clear_click() {
	    var area = document.querySelector('#text-area');	    
	    area.value = "";	    
	    window.localStorage.clear();	    
	  }	    
	</script> 
      </section>

      <section>
        <h1>Web SQL Databases</h1>
	<ul>
	<li>Asynkron interaksjon</li>
	<li>SQL-kall køes og kjøres i rekkefølge</li>
	<li>default size =  5Mb / domain</li>
	<li>Safari, Chrome, and Opera</li>
	</ul>        
      </section>

      <section>
        <h1>Web SQL - open</h1>
        <pre>
var dbSize = 5 * 1024 * 1024; // 5MB
webdb.db = openDatabase(
  'chat', '1.0', 'FancyChat database', dbSize);
</pre>
      </section>
      <section>
        <h1>Web SQL - table</h1>
        <pre>
webdb.db.transaction(function(tx) {
  tx.executeSql(
    'CREATE TABLE IF NOT EXISTS posts(
      ID INTEGER PRIMARY KEY ASC, nick
      TEXT, content TEXT, added_on DATETIME, 
      owner BOOLEAN)');
});
</pre>
      </section>
      <section>
        <h1>Web SQL - query</h1>
        <pre>
webdb.db.transaction(function(tx) {
  tx.executeSql(
    'SELECT * FROM posts WHERE ID=?', 
    [id], 
    webdb.onSuccess, 
    webdb.onError
  );
});
</pre>
      </section>
      <section>
        <h1>IndexDB</h1>
	<ul>
	<li>Aktiv utvikling av Mozilla</li>
	<li>Ikke SQL basert</li>
	<li>JavaScript objektlager med indekser</li>
	<li>Asynkron interaksjon</li>
	<li><a href="http://www.w3.org/TR/IndexedDB/">http://www.w3.org/TR/IndexedDB/</a></li>
	</ul>        
      </section>


      <section>
        <p>the end :)</p>
      </section>

  </body>
</html>
